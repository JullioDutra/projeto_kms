{% extends 'core/base.html' %}

{% block title %}Hall da Fama - KMS Tracker{% endblock %}

{% block extra_css %}
<style>
    /* --- TÍTULO PREMIUM --- */
    .title-gradient {
        background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 900;
        font-size: 2.2rem;
        letter-spacing: -1px;
    }

    /* --- CARDS DO RANKING --- */
    .ranking-container { display: flex; flex-direction: column; gap: 12px; }
    
    .rank-card {
        display: flex; align-items: center; justify-content: space-between;
        background: #1a1d20;
        border-radius: 18px; padding: 16px 20px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        transition: transform 0.2s ease;
    }
    .rank-card:hover { transform: translateY(-3px); }

    /* ✨ ESTILOS DO PÓDIO ✨ */
    .top-1 { 
        background: linear-gradient(145deg, #1f1b0d 0%, #2e2400 100%);
        border: 1px solid rgba(255, 215, 0, 0.4); 
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.15); 
    }
    .top-2 { 
        background: linear-gradient(145deg, #1a1d20 0%, #242526 100%);
        border: 1px solid rgba(192, 192, 192, 0.3); 
    }
    .top-3 { 
        background: linear-gradient(145deg, #1a1d20 0%, #291e14 100%);
        border: 1px solid rgba(205, 127, 50, 0.3); 
    }

    .pos-box { width: 45px; display: flex; justify-content: center; align-items: center; }
    .rank-icon { font-size: 1.8rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4)); }
    .icon-gold { color: #ffd700; }
    .icon-silver { color: #c0c0c0; }
    .icon-bronze { color: #cd7f32; }
    .pos-number { font-size: 1.3rem; font-weight: 900; color: #6c757d; }

    .athlete-info { flex-grow: 1; padding-left: 10px; }
    .athlete-name { font-size: 1.15rem; font-weight: 800; color: #ffffff; margin-bottom: 0; line-height: 1.2; }
    .athlete-level { font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }

    .stats-box { text-align: right; display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
    .total-km { font-size: 1.4rem; font-weight: 900; line-height: 1; }
    .top-1 .total-km { color: #ffd700; }
    .top-2 .total-km, .top-3 .total-km, .rank-card .total-km { color: #00d2ff; } 
    
    .badge-dias { 
        background: rgba(255, 255, 255, 0.05); 
        padding: 4px 10px; 
        border-radius: 20px; 
        font-size: 0.75rem;
        font-weight: 700;
        color: #aaa;
        border: 1px solid rgba(255,255,255,0.08);
        display: inline-flex; align-items: center; gap: 5px;
    }

    @media (max-width: 576px) {
        .rank-card { padding: 14px 15px; }
        .athlete-name { font-size: 1.05rem; }
        .total-km { font-size: 1.25rem; }
        .rank-icon { font-size: 1.5rem; }
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-2" style="max-width: 650px;">
    
    <div class="text-center mb-5 mt-2">
        <div class="d-inline-block p-3 rounded-circle" style="background: rgba(255, 215, 0, 0.1); margin-bottom: 10px;">
            <i class="bi bi-star-fill text-warning fs-1"></i>
        </div>
        <h1 class="title-gradient mb-1">Hall da Fama</h1>
        <p class="text-muted fw-bold mb-0">Somatório Geral de Todos os Tempos</p>
    </div>
    
    <div class="ranking-container">
        {% for corredor in ranking %}
        <div class="rank-card {% if forloop.counter == 1 %}top-1{% elif forloop.counter == 2 %}top-2{% elif forloop.counter == 3 %}top-3{% endif %}">
            
            <div class="d-flex align-items-center w-100">
                
                <div class="pos-box">
                    {% if forloop.counter == 1 %} 
                        <i class="bi bi-trophy-fill rank-icon icon-gold"></i>
                    {% elif forloop.counter == 2 %} 
                        <i class="bi bi-award-fill rank-icon icon-silver"></i>
                    {% elif forloop.counter == 3 %} 
                        <i class="bi bi-award-fill rank-icon icon-bronze"></i>
                    {% else %} 
                        <span class="pos-number">{{ forloop.counter }}º</span>
                    {% endif %}
                </div>
                
                <div class="athlete-info">
                    <h4 class="athlete-name">{{ corredor.nome_usuario }}</h4>
                    <span class="{{ corredor.classe_nivel }} athlete-level">{{ corredor.nivel }}</span>
                </div>
                
                <div class="stats-box">
                    <div class="total-km">
                        {{ corredor.total_km_geral|floatformat:1 }}<span style="font-size: 0.8rem; font-weight: 600; color: #888;">km</span>
                    </div>
                    <div class="badge-dias">
                        <i class="bi bi-calendar-check text-success"></i> {{ corredor.dias_ativos }} d
                    </div>
                </div>

            </div>
        </div>
        {% empty %}
        <div class="text-center py-5">
            <i class="bi bi-emoji-frown text-muted fs-1 d-block mb-3"></i>
            <h5 class="text-white fw-bold">Nenhum atleta registrado.</h5>
            <p class="text-muted">A corrida ainda não começou!</p>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}
